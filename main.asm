; ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⣤⣤⣤⣤⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀
; ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣶⣶⣴⡾⠋⠉⠀⠀⠀⠉⠛⢷⣄⠀⠀⠀⠀⣠⣶⡾⢷⣄⣰⡾⠛⠉⠉⠙⠻⢶⣄⠀⠀⠀⠀⠀
; ⠀⠀⣀⣀⠀⠀⠀⣴⠾⠛⢷⡄⠀⠈⣷⠈⢿⣿⣯⣴⠶⣶⣶⣄⠀⠀⠹⣷⡀⠀⠀⣿⠐⠁⢸⣿⠿⣷⣿⣴⣤⣄⠀⠀⠙⢷⣄⠀⠀⠀
; ⣠⣾⡏⢿⣦⠀⠀⣿⠀⠀⠸⣿⡆⠀⣟⠁⠈⣿⣿⠀⠀⢸⣿⠿⣷⠀⠀⢹⣷⠀⢰⡏⠀⠀⣾⣿⠀⠉⣿⠋⠋⢹⣿⣦⠀⠀⠙⣧⡀⠀
; ⣿⠀⠁⢸⣿⠀⠀⣿⠀⠀⠀⣿⣇⠀⣿⠀⠀⣼⣿⠀⠀⢸⣿⠀⣿⠀⠀⢸⣿⡇⣸⡇⠀⠀⣿⡿⠀⠀⣿⠀⠀⢸⣿⡿⣷⡀⠀⠸⣷⡀
; ⢻⡇⠀⠸⣿⡄⠀⣿⠀⠀⠀⢸⣿⡀⢸⡆⠀⢹⣿⡆⠀⠸⣿⣿⠟⠀⠀⣾⣿⠇⣿⠁⠀⢸⣿⡇⠀⠀⣿⡆⠀⢸⣿⡇⠸⣧⠀⠀⢻⣧
; ⠘⣷⠀⠀⢹⣧⢰⡿⠀⠀⠀⠀⢿⣇⣸⠇⠀⢸⣿⡇⠀⠐⠛⠁⠀⣠⣾⣿⡟⢠⡿⠀⠀⢸⣿⡇⠀⠀⢸⡇⠀⢸⣿⡇⠀⣿⠀⠀⢸⣿
; ⠀⢹⣇⠀⠀⢻⣿⡇⠀⠀⡆⠀⠘⣿⣿⠀⠀⣼⣿⣧⠀⠀⢀⠀⠘⢿⣿⠏⠀⢸⡇⠀⠀⣾⣿⣠⣴⣦⣸⡇⠀⢸⣿⡇⠀⣿⠀⠀⢸⣿
; ⠀⠀⢻⡆⠀⠀⠿⠀⠀⣸⣷⠀⠀⢻⠇⠀⢠⣿⣿⢿⡄⠀⠘⣧⠀⠀⢻⣆⠀⣿⠃⠀⢠⣿⣿⣿⠄⠙⢿⣷⣴⣾⣿⣇⣴⡟⠀⠀⣾⣿
; ⠀⠀⠈⣿⠀⠀⠀⠀⢠⣿⣿⡀⠀⠀⠀⣠⣾⣿⠇⢸⣇⠀⡀⣿⣇⠀⠀⣿⣶⡿⠀⠀⡼⠿⠛⠛⠀⠀⠈⣿⣄⠀⠈⠉⠁⠀⢀⣼⣿⡏
; ⠀⠀⠀⢻⣆⠀⢀⣴⣿⣿⢿⣧⣀⣀⣴⣿⣿⠏⠀⠀⢻⣶⣿⣿⣿⣦⣸⣿⣿⡁⠀⠀⠀⢀⣀⣄⣤⣀⣴⣿⣿⣷⣶⣶⣶⣾⣿⡿⠋⠀
; ⠀⠀⠀⠀⠻⣿⣿⣽⠿⠃⠀⠹⢿⣿⣿⠟⠁⠀⠀⠀⠀⠉⠋⠁⠀⠙⢿⡿⠛⣿⣶⣾⣿⣿⣿⣿⠿⠿⠿⠟⠁⠈⠉⠛⠛⠉⠁⠀⠀⠀
; ⠀⠀⠀⠀⠀⠀⠀⣀⣤⣤⣤⣤⣄⡀⠀⠀⠀⠀⠀⠀⠀⣀⣠⣤⣤⣤⣄⣀⠀⠈⠉⠉⠉⠉⠀⢀⣀⣤⣤⣤⣤⣀⠀⠀⠀⠀⠀⠀⠀⠀
; ⠀⠀⠀⠀⠀⣠⡾⠋⠁⠀⠀⠀⠉⠛⢷⡄⠀⠀⠀⣠⣾⠟⠁⠀⠀⠀⠈⠙⢷⣄⠀⠀⠀⢀⣴⠟⠉⠀⠀⠀⠈⠙⠻⣦⡀⠀⠀⠀⠀⠀
; ⠀⠀⠀⠀⣼⠏⠀⢀⣴⢶⣶⣦⣄⠀⠈⢻⣆⠀⢰⡟⠁⠀⣠⣶⣶⣶⣄⠀⠀⠹⣧⠀⢀⣾⠃⠀⣠⣶⣶⣶⣦⡀⠀⠘⣷⡄⠀⠀⠀⠀
; ⠀⠀⠀⢠⣿⠀⠀⣿⣿⠟⠉⠉⢻⡆⠀⠈⣿⣆⣿⠀⠀⣼⣿⠟⠉⠉⠻⣧⠀⠀⢻⣇⣸⡇⠀⢰⣿⡿⠋⠉⠙⢿⡀⠀⢸⣷⠀⠀⠀⠀
; ⠀⠀⠀⠘⣿⡀⠀⢻⣯⣀⣀⣠⡾⠿⠀⠀⣿⣿⢿⡄⠀⠹⣿⣄⣀⣀⣴⠿⠀⠀⢸⣿⢹⣇⠀⠘⢿⣇⣀⣀⣴⠿⠇⠀⠈⣿⡇⠀⠀⠀
; ⠀⠀⠀⠀⠙⣷⣄⠀⠈⠉⠉⠉⢀⡠⠀⠀⣿⣿⠘⢿⣄⠀⠀⠉⠉⠉⠀⣠⠀⠀⣸⣿⠀⢻⣦⡀⠀⠈⠉⠉⠁⢀⡄⠀⢰⣿⡇⠀⠀⠀
; ⠀⠀⠀⠀⠀⠈⠻⣷⣶⣦⣤⣴⣿⠃⠀⣰⣿⡟⠀⠈⠻⣿⣶⣦⣤⣴⣾⠏⠀⢀⣿⣿⠀⠀⠙⢿⣷⣶⣤⣤⣾⡞⠁⠀⣼⣿⠇⠀⠀⠀
; ⠀⠀⠀⠀⠀⠀⠀⠀⠉⠙⣻⡿⠁⠀⢠⣿⣿⠃⠀⠀⠀⠀⠉⠙⢛⣿⠋⠀⢀⣾⣿⠇⠀⠀⠀⠀⠈⠉⠛⣿⠟⠀⠀⣰⣿⡟⠀⠀⠀⠀
; ⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⠋⠀⢀⣴⣿⡿⠃⠀⠀⠀⠀⠀⠀⣴⠟⠁⠀⣠⣿⣿⠏⠀⠀⠀⠀⠀⠀⣠⡾⠋⠀⢠⣾⣿⡟⠁⠀⠀⠀⠀
; ⠀⠀⠀⠀⠀⠀⠀⠀⠘⢿⣿⣶⣿⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⢻⣾⣧⣾⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠙⣿⣿⣾⣿⣿⠋⠀⠀⠀⠀⠀⠀
; ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠛⠛⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠙⠛⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀ ⠈⠙⠛⠋⠀⠀⠀⠀⠀⠀⠀⠀

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~;
;                                                            ;
; From flopsreallygotit to strong and fearless asm enjoyers. ;
;                                                            ;
;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~;

.model tiny
.286

locals @@

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.data

;~~~Config~~~
button = 1ah

;~~~Video Output~~~
video = 0b800h       ; Address of video segment start.
cmd   = 0081h        ; Address of cmd   segment start.
shift = 1980         ; Display shift.

; ;~~~Frame Output~~~
; x1 = 2
; y1 = 2

; x2 = 12
; y2 = 7

; color = 3eh

; style db "1234 6789"

;~~~Constants~~~
int_09   = 4h * 9h   ; Shift of 9 interrupt in Interruption Table.
int_08   = 4h * 8h   ; Shift of 8 interrupt in Interruption Table.
buffer   = 0b925h    ; Address of buffer.
buf_size = 80d * 25d ; Size of buffer. (Number of symbols on display)

;~~~Frame switch flag~~~
flag db 0 ; Frame is on display if flag != 0, else frame is not on display.

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

include macro.asm

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.code

org 100h

Start:      xor bx, bx
            mov es, bx

            mov bx, int_09
            mov di, offset old_int_09
            mov si, offset New_int_09
            call PlaceInterrupt

            mov bx, int_08
            mov di, offset old_int_08
            mov si, offset New_int_08
            call PlaceInterrupt

            STAYRESIDENT

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

include string.asm
include funcs.asm

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

EOP:
end Start
